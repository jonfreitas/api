# Plurall DataServer Engine

Engine para criação de DataServers.

## Pré requisitos

| Programa | Versão     |
| :------- | ---------: |
| Git      | `≥2.0.0`   |
| Node JS  | `≥12.22.0` |
| Yarn     | `~1.22.0`  |

## Iniciando

Configure o seu acesso ao [GitLab Packages](https://gitlab.com/sdk12/plurall/microservices/docs/-/blob/main/docs/gitlab-packages.md)

Adicione o `@sdk12/dataserver` como dependência:

```
yarn add @sdk12/dataserver
```

## Como Usar:

**Exemplo de service.ts:**
```javascript
import path from 'path'
import dataList from './mocks/list.json'
import { Logger } from './src/index'

export class ServiceList {
    proto: string = path.join(__dirname, '/..', '/protos/list.proto')
    public List = (args, callback) => {
      Logger.log('Chamando o método List', args.metadata._internal_repr)
      callback(null, {list: dataList, server: 'nodejs' })
    }

    public Get = (args, callback) => {
      Logger.log('Chamando o método Get', args.metadata._internal_repr)
      callback(null, {list: dataList.find(list => list.id == args.request.id), server: 'nodejs'})
    }
}
```

**Exemplo de index.ts**
```javascript
import { Engine } from '@sdk12/dataserver'
import { ServiceList } from './service'

const engine = new Engine()
engine.setServices([
    new ServiceList(),
])
engine.start('0.0.0.0:50051')
```

## Consulte os exemplos:
**Clone o repositório:**

SSH:
```console
$ git clone git@gitlab.com:sdk12/plurall/microservices/frameworks/nodejs/dataserver.git
```
HTTPS:
```console
$ git clone https://gitlab.com/sdk12/plurall/microservices/frameworks/nodejs/dataserver.git
```

**Instale as dependências:**
```console
$ cd dataserver && yarn
```

## Executando os exemplos:

**DataServer:**
```console
$ yarn start:example-dataserver
```

**Cliente REST:**
```console
$ yarn start:example-client-rest
```

**Client GRPC:**
```console
$ yarn start:example-client-grpc
```

## Tecnologias

* [gRPC](https://grpc.io/) - A high performance, open-source universal RPC framework.
* [Node JS](https://nodejs.org/en/about/) - Engine.
* [YARN](https://yarnpkg.com/pt-BR/) - Dependency Manager.
